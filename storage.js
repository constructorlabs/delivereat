const storage = {
  dishes: {
    // 1: {
    //   dishId: 1,
    //   name: "Chicken Caesar Salad",
    //   category: "Salads",
    //   description: "",
    //   price: 6.55,
    //   imageUrl: "",
    //   inStock: true,
    // },
    // 2: {
    //   dishId: 2,
    //   name: "Grilled Chicken Breast Burger",
    //   category: "Burgers",
    //   description: "",
    //   price: 5.75,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 3: {
    //   dishId: 3,
    //   name: "Classic 6 oz. Beef Burger",
    //   category: "Burgers",
    //   description: "",
    //   price: 5.75,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 4: {
    //   dishId: 4,
    //   name: "Beer-Battered Onion Rings (6 Pc.)",
    //   category: "Sides",
    //   description: "",
    //   price: 1.4,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 5: {
    //   dishId: 5,
    //   name: "Bowl of Chips",
    //   category: "Sides",
    //   description: "",
    //   price: 2.8,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 6: {
    //   dishId: 6,
    //   name: "Millionaire Sundae",
    //   category: "Desserts",
    //   description: "",
    //   price: 3.6,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 7: {
    //   dishId: 7,
    //   name: "Coke",
    //   category: "Drinks",
    //   description: "",
    //   price: 1.2,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 8: {
    //   dishId: 8,
    //   name: "Fanta",
    //   category: "Drinks",
    //   description: "",
    //   price: 1.2,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 9: {
    //   dishId: 9,
    //   name: "Grilled Salad",
    //   category: "",
    //   description: "",
    //   price: 4.30,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 1: {
    //   dishId: 1,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true,
    // },
    // 2: {
    //   dishId: 2,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 3: {
    //   dishId: 3,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 4: {
    //   dishId: 4,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 5: {
    //   dishId: 5,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 6: {
    //   dishId: 6,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 7: {
    //   dishId: 7,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 8: {
    //   dishId: 8,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 9: {
    //   dishId: 9,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: ,
    //   imageUrl: "",
    //   inStock: true
    // },
    11: {
      dishId: 11,
      name: "Chicken Ceaser Salad",
      category: "Salad",
      description: "",
      price: 5.60,
      imageUrl: "",
      inStock: true,
    },
    12: {
      dishId: 12,
      name: "Grilled Salad",
      category: "Salad",
      description: "",
      price: 4.99,
      imageUrl: "",
      inStock: true
    },
    13: {
      dishId: 13,
      name: "Deep Fried Lettuce",
      category: "Salad",
      description: "",
      price: 7.00,
      imageUrl: "",
      inStock: true
    },
    14: {
      dishId: 14,
      name: "Roasted Tomatoes",
      category: "Salad",
      description: "",
      price: 5.20,
      imageUrl: "",
      inStock: true
    },
    21: {
      dishId: 21,
      name: "Bowl of Chips",
      category: "Sides",
      description: "",
      price: 2.70,
      imageUrl: "",
      inStock: true,
    },
    22: {
      dishId: 22,
      name: "Garlic Bread",
      category: "Sides",
      description: "",
      price: 3.40,
      imageUrl: "",
      inStock: true
    },
    23: {
      dishId: 23,
      name: "Nachos",
      category: "Sides",
      description: "",
      price: 4.20,
      imageUrl: "",
      inStock: true
    },
    24: {
      dishId: 24,
      name: "Potato Salad",
      category: "Sides",
      description: "",
      price: 4.99,
      imageUrl: "",
      inStock: true
    },
    25: {
      dishId: 25,
      name: "French Fries",
      category: "Sides",
      description: "",
      price: 6,
      imageUrl: "",
      inStock: true
    },
    26: {
      dishId: 26,
      name: "Bacon",
      category: "Sides",
      description: "",
      price: 2.20,
      imageUrl: "",
      inStock: true
    },
    27: {
      dishId: 27,
      name: "Bacon with Cheese",
      category: "Sides",
      description: "",
      price: 3.20,
      imageUrl: "",
      inStock: true
    },
    28: {
      dishId: 28,
      name: "Bacon with Bacon",
      category: "Sides",
      description: "",
      price: 4.20,
      imageUrl: "",
      inStock: true
    },
        // 1: {
    //   dishId: 1,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: 0,
    //   imageUrl: "",
    //   inStock: true,
    // },
    // 2: {
    //   dishId: 2,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: 0,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 3: {
    //   dishId: 3,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: 0,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 4: {
    //   dishId: 4,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: 0,
    //   imageUrl: "",
    //   inStock: true
    // },
    // 5: {
    //   dishId: 5,
    //   name: "",
    //   category: "",
    //   description: "",
    //   price: 0,
    //   imageUrl: "",
    //   inStock: true
    // },
            31: {
      dishId: 31,
      name: "Soup of the Day",
      category: "Starters",
      description: "",
      price: 5,
      imageUrl: "",
      inStock: true,
    },
    32: {
      dishId: 32,
      name: "Soup of the Month",
      category: "Starters",
      description: "",
      price: 6.80,
      imageUrl: "",
      inStock: true
    },
    33: {
      dishId: 33,
      name: "Crusty Bread",
      category: "Starters",
      description: "",
      price: 4.80,
      imageUrl: "",
      inStock: true
    },
    34: {
      dishId: 34,
      name: "Salad",
      category: "Starters",
      description: "",
      price: 5.80,
      imageUrl: "",
      inStock: true
    },
    35: {
      dishId: 35,
      name: "Large Salad",
      category: "Starters",
      description: "",
      price: 9.99,
      imageUrl: "",
      inStock: true
    },
            41: {
      dishId: 41,
      name: "Pulled Pork",
      category: "Mains",
      description: "",
      price: 15.40,
      imageUrl: "",
      inStock: true,
    },
    42: {
      dishId: 42,
      name: "Steak Lasagne",
      category: "Mains",
      description: "",
      price: 15.30,
      imageUrl: "",
      inStock: true
    },
    43: {
      dishId: 43,
      name: "Mystery Meat",
      category: "Mains",
      description: "",
      price: 20,
      imageUrl: "",
      inStock: true
    },
    44: {
      dishId: 44,
      name: "Farmers Suprise",
      category: "Mains",
      description: "",
      price: 18.30,
      imageUrl: "",
      inStock: true
    },
   45: {
      dishId: 45,
      name: "Yesterdays Leftovers",
      category: "Mains",
      description: "",
      price: 20.90,
      imageUrl: "",
      inStock: true
    },
    51: {
      dishId: 51,
      name: "Classic Burger",
      category: "Burgers",
      description: "",
      price: 10,
      imageUrl: "",
      inStock: true,
    },
    52: {
      dishId: 52,
      name: "Cheese Burger",
      category: "Burgers",
      description: "",
      price: 10,
      imageUrl: "",
      inStock: true
    },
    53: {
      dishId: 53,
      name: "Texas BBQ Burger",
      category: "Burgers",
      description: "",
      price: 10,
      imageUrl: "",
      inStock: true
    },
    54: {
      dishId: 54,
      name: "Triple Burger",
      category: "Burgers",
      description: "",
      price: 13,
      imageUrl: "",
      inStock: true
    },
    55: {
      dishId: 55,
      name: "Fowl Burger",
      category: "Burgers",
      description: "",
      price: 13,
      imageUrl: "",
      inStock: true
    },
    61: {
      dishId: 61,
      name: "Rump Steak",
      category: "Steaks",
      description: "",
      price: 20,
      imageUrl: "",
      inStock: true,
    },
    62: {
      dishId: 62,
      name: "Sirloin",
      category: "Steaks",
      description: "",
      price: 22,
      imageUrl: "",
      inStock: true
    },
    63: {
      dishId: 63,
      name: "Rib-eye",
      category: "Steaks",
      description: "",
      price: 24,
      imageUrl: "",
      inStock: true
    },
    64: {
      dishId: 64,
      name: "T-Bone",
      category: "Steaks",
      description: "",
      price: 26,
      imageUrl: "",
      inStock: true
    },
    65: {
      dishId: 65,
      name: "Flat Iron",
      category: "Steaks",
      description: "",
      price: 28,
      imageUrl: "",
      inStock: true
    },
    71: {
      dishId: 71,
      name: "Pork Ribs",
      category: "Ribs",
      description: "",
      price: 20.20,
      imageUrl: "",
      inStock: true,
    },
    72: {
      dishId: 72,
      name: "BBQ Pork Ribs",
      category: "Ribs",
      description: "",
      price: 20.90,
      imageUrl: "",
      inStock: true
    },
    73: {
      dishId: 73,
      name: "Sweet Chilli Ribs",
      category: "Ribs",
      description: "",
      price: 20.40,
      imageUrl: "",
      inStock: true
    },
    74: {
      dishId: 74,
      name: "Hot & Spicy Ribs",
      category: "Ribs",
      description: "",
      price: 25.90,
      imageUrl: "",
      inStock: true
    },
    75: {
      dishId: 75,
      name: "Full Rack of Ribs",
      category: "Ribs",
      description: "",
      price: 30.30,
      imageUrl: "",
      inStock: true
    },
    81: {
      dishId: 81,
      name: "Coke",
      category: "Drinks",
      description: "",
      price: 2.50,
      imageUrl: "",
      inStock: true,
    },
    82: {
      dishId: 82,
      name: "Fanta",
      category: "Drinks",
      description: "",
      price: 3.40,
      imageUrl: "",
      inStock: true
    },
    83: {
      dishId: 83,
      name: "Corona",
      category: "Drinks",
      description: "",
      price: 5.00,
      imageUrl: "",
      inStock: true
    },
    84: {
      dishId: 84,
      name: "Brew Dog Punk IPA",
      category: "Drinks",
      description: "",
      price: 6.00,
      imageUrl: "",
      inStock: true
    },
    85: {
      dishId: 85,
      name: "Brew Dog Dead Pony Club",
      category: "Drinks",
      description: "",
      price: 6.00,
      imageUrl: "",
      inStock: true
    },
    86: {
      dishId: 86,
      name: "Peroni",
      category: "Drinks",
      description: "",
      price: 6.00,
      imageUrl: "",
      inStock: true
    },
    87: {
      dishId: 87,
      name: "Ghost Ship Pale Ale",
      category: "Drinks",
      description: "",
      price: 7.19,
      imageUrl: "",
      inStock: true
    },

  },
  orders: {
    100: {}
  }
};

function getDishes() {
  return storage.dishes;
}

function getDishById(dishId) {
  return storage.dishes[dishId];
}

function getDishCategories() {
  let categories = {};

  for (let item in storage.dishes) {
    let dish = storage.dishes[item];
    let category = storage.dishes[item].category;

    if (categories.hasOwnProperty(category)) {
      categories[category].push(dish);
    } else {
      categories[category] = [dish];
    }
  }
  return categories;
}

function getOrders() {
  return storage.orders;
}

function getOrderById(orderId) {
  return storage.orders[orderId];
}

function createOrder(newOrder) {
  const allIds = Object.keys(storage.orders);
  const highestId = Math.max(...allIds);
  const newOrderId = highestId + 1;

  let total = 0;

  Object.keys(newOrder).map(dish => {
    let subTotal = newOrder[dish].price * newOrder[dish].quantity;

    newOrder[dish].subTotal = Number(subTotal);

    total += Number(subTotal);
  });

  const orderToSave = Object.assign(
    { dishes: newOrder },
    { orderId: newOrderId },
    { deliveryFee: Number(2.5) },
    { total: Number(total) }
  );
  storage.orders[newOrderId] = orderToSave;
  return orderToSave;
}

module.exports = {
  getDishes,
  getDishById,
  getDishCategories,
  getOrders,
  getOrderById,
  createOrder
};
